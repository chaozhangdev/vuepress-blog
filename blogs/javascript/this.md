---
title: this in JavaScript
date: 2021-07-14
tags:
  - JavaScript
categories:
  - JavaScript
---

1：this 永远指向一个对象；

2：this 的指向完全取决于函数调用的位置；

针对以上的第一点特别好理解，不管在什么地方使用 this，它必然会指向某个对象；确定了第一点后，也引出了一个问题，就是 this 使用的地方到底在哪里，而第二点就解释了这个问题，但关键是在 JavaScript 语言之中，一切皆对象，运行环境也是对象，所以函数都是在某个对象下运行，而 this 就是函数运行时所在的对象（环境）。这本来并不会让我们糊涂，但是 JavaScript 支持运行环境动态切换，也就是说，this 的指向是动态的，很难事先确定到底指向哪个对象，这才是最让我们感到困惑的地方。

```js
function fun(){
    console.log(this.s);
}
​
var obj = {
    s:'1',
    f:fun
}
​
var s = '2';
​
obj.f(); //1
fun(); //2
```

上述代码中，fun 函数被调用了两次，显而易见的是两次的结果不一样；

很多人都会这样解释，obj.f()的调用中，因为运行环境在 obj 对象内，因此函数中的 this 指向对象 obj;

而在全局作用域下调用 fun() ，函数中的 this 就会指向全局作用域对象 window;

但是大部分人不会告诉你，this 的指向为什么会发生改变，this 指向的改变到底是什么时候发生的；而搞懂了这些，this 的使用才不会出现意外；

首先我们应该知道，在 JS 中，数组、函数、对象都是引用类型，在参数传递时也就是引用传递；

上面的代码中，obj 对象有两个属性，但是属性的值类型是不同的，在内存中的表现形式也是不同的；
