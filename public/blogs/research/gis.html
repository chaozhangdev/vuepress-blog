<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>GIS - City of Vancouver Navigation Toolbox Development | Chao Zhang</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/xxx.jpg">
    <meta name="description" content="Life is a moment">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.a79df9bc.css" as="style"><link rel="preload" href="/assets/js/app.07bab564.js" as="script"><link rel="preload" href="/assets/js/3.981dde78.js" as="script"><link rel="preload" href="/assets/js/1.459f4565.js" as="script"><link rel="preload" href="/assets/js/4.83b15931.js" as="script"><link rel="prefetch" href="/assets/js/10.962a556b.js"><link rel="prefetch" href="/assets/js/11.a6c72476.js"><link rel="prefetch" href="/assets/js/12.baea1ec3.js"><link rel="prefetch" href="/assets/js/13.01ef4b3d.js"><link rel="prefetch" href="/assets/js/14.418e0d7d.js"><link rel="prefetch" href="/assets/js/15.bd6e64e4.js"><link rel="prefetch" href="/assets/js/16.e1957405.js"><link rel="prefetch" href="/assets/js/17.1745c6f4.js"><link rel="prefetch" href="/assets/js/18.dbe4179c.js"><link rel="prefetch" href="/assets/js/19.3eff5fb5.js"><link rel="prefetch" href="/assets/js/20.b00a7645.js"><link rel="prefetch" href="/assets/js/21.81292018.js"><link rel="prefetch" href="/assets/js/22.d2a21979.js"><link rel="prefetch" href="/assets/js/23.d6ccb661.js"><link rel="prefetch" href="/assets/js/24.83dfbf41.js"><link rel="prefetch" href="/assets/js/25.068ecde1.js"><link rel="prefetch" href="/assets/js/26.32c5db52.js"><link rel="prefetch" href="/assets/js/27.0fecf226.js"><link rel="prefetch" href="/assets/js/28.07288cb8.js"><link rel="prefetch" href="/assets/js/29.94d18672.js"><link rel="prefetch" href="/assets/js/30.aa07ac9d.js"><link rel="prefetch" href="/assets/js/31.9989d81a.js"><link rel="prefetch" href="/assets/js/32.48cacf61.js"><link rel="prefetch" href="/assets/js/5.02263260.js"><link rel="prefetch" href="/assets/js/6.f432ca27.js"><link rel="prefetch" href="/assets/js/7.d427b92c.js"><link rel="prefetch" href="/assets/js/8.967cee95.js"><link rel="prefetch" href="/assets/js/9.49462f65.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a79df9bc.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-1156296a><div data-v-1156296a><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-1156296a data-v-1156296a><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-4e82dffc data-v-1156296a data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>Chao Zhang</h3> <p class="description" data-v-4e82dffc data-v-4e82dffc>Life is a moment</p> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Chao Zhang</span>
            
          <span data-v-4e82dffc>2018 - </span>
          2021
        </a></span></div></div> <div class="hide" data-v-1156296a><header class="navbar" data-v-1156296a><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/xxx.jpg" alt="Chao Zhang" class="logo"> <span class="site-name">Chao Zhang</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Front-End/" class="nav-link"><i class="undefined"></i>
  Front-End
</a></li><li class="dropdown-item"><!----> <a href="/categories/Leetcode/" class="nav-link"><i class="undefined"></i>
  Leetcode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Research/" class="nav-link"><i class="undefined"></i>
  Research
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-coding"></i>
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chaozhangdev" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/chao-zhang-727b8b15b/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-linkedin"></i>
  Linkedin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="mailto:chaozhangdev@gmail.com" class="nav-link external"><i class="iconfont reco-mail"></i>
  Email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-1156296a></div> <aside class="sidebar" data-v-1156296a><div class="personal-info-wrapper" data-v-828910c6 data-v-1156296a><img src="/chao.jpg" alt="author-avatar" class="personal-img" data-v-828910c6> <h3 class="name" data-v-828910c6>
    Chao Zhang
  </h3> <div class="num" data-v-828910c6><div data-v-828910c6><h3 data-v-828910c6>21</h3> <h6 data-v-828910c6>Articles</h6></div> <div data-v-828910c6><h3 data-v-828910c6>26</h3> <h6 data-v-828910c6>Tags</h6></div></div> <ul class="social-links" data-v-828910c6></ul> <hr data-v-828910c6></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link"><i class="iconfont reco-home"></i>
  Home
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/Front-End/" class="nav-link"><i class="undefined"></i>
  Front-End
</a></li><li class="dropdown-item"><!----> <a href="/categories/Leetcode/" class="nav-link"><i class="undefined"></i>
  Leetcode
</a></li><li class="dropdown-item"><!----> <a href="/categories/Research/" class="nav-link"><i class="undefined"></i>
  Research
</a></li><li class="dropdown-item"><!----> <a href="/categories/Vue/" class="nav-link"><i class="undefined"></i>
  Vue
</a></li></ul></div></div><div class="nav-item"><a href="/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/timeline/" class="nav-link"><i class="iconfont reco-date"></i>
  TimeLine
</a></div><div class="nav-item"><a href="/about/" class="nav-link"><i class="iconfont reco-coding"></i>
  About
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      Contact
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://github.com/chaozhangdev" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/chao-zhang-727b8b15b/" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-linkedin"></i>
  Linkedin
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="mailto:chaozhangdev@gmail.com" class="nav-link external"><i class="iconfont reco-mail"></i>
  Email
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-4e82dffc data-v-1156296a><h3 class="title" data-v-4e82dffc data-v-4e82dffc>GIS - City of Vancouver Navigation Toolbox Development</h3> <!----> <label id="box" class="inputBox" data-v-4e82dffc data-v-4e82dffc><input type="password" value="" data-v-4e82dffc> <span data-v-4e82dffc>Konck! Knock!</span> <button data-v-4e82dffc>OK</button></label> <div class="footer" data-v-4e82dffc data-v-4e82dffc><span data-v-4e82dffc><i class="iconfont reco-theme" data-v-4e82dffc></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-4e82dffc>vuePress-theme-reco</a></span> <span data-v-4e82dffc><i class="iconfont reco-copyright" data-v-4e82dffc></i> <a data-v-4e82dffc><span data-v-4e82dffc>Chao Zhang</span>
            
          <span data-v-4e82dffc>2018 - </span>
          2021
        </a></span></div></div> <div data-v-1156296a><main class="page" style="padding-right:0;"><section><div class="page-title"><h1 class="title">GIS - City of Vancouver Navigation Toolbox Development</h1> <div data-v-1ff7123e><i class="iconfont reco-account" data-v-1ff7123e><span data-v-1ff7123e>Chao Zhang</span></i> <i class="iconfont reco-date" data-v-1ff7123e><span data-v-1ff7123e>8/7/2019</span></i> <!----> <i class="tags iconfont reco-tag" data-v-1ff7123e><span class="tag-item" data-v-1ff7123e>Research</span><span class="tag-item" data-v-1ff7123e>Computer Science</span><span class="tag-item" data-v-1ff7123e>GIS</span></i></div></div> <div class="theme-reco-content content__default"><h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>As the demand for navigation access increases so does the improvement of software development, more and more navigation tools have been created for efficient life among cities. This project is to create a new navigation toolbox based on ArcGIS by python scripts to provide users shortest route information among two arbitrary places among the city of Vancouver. The input are citizens addresses ID or names of different places with their types and results can offer users detailed navigation including street names, travelling distances and positions of street intersections. Key word: navigation; shortest route; Dijskra’s algorithm.</p> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>Nowadays, navigation plays a more and more significant role in urban city life especially in some big cities. It has totally replaced traditional maps for users to find a location or select an optimal route among cities in our daily life. In this project, a navigation toolbox has been created containing four functions in city of Vancouver based on geographic information system(GIS). Users can use this toolbox to easily find nearest or specified school, library or school from home among Vancouver, get shortest a route between two properties and obtain a shortest path between two given different places. It will show users detailed information in navigation which contains street names, street lengths and positions of intersections. The motivation of undertaking the research is from daily life. Every time when I use Google map, I notice it is an essential software among people and wonder if there is possible to make a navigation software like that by myself. GIS provides XY coordinates and some attributes of every object in Vancouver, relationships among different objects can be found and spatial positions with geographic references are reliable to analyze to create new toolbox. The general solution for navigation in this project is to locate start and end points first, then choose network area covering these two points and last analyze this network area to provide an optimal path. In the rest of this report, it will illustrate data collection, flowchart of solution, details in network area analysis which is how to find an optimal path and Dijsktra’s algorithm applied in shortest route calculation.</p> <h2 id="literature-review"><a href="#literature-review" class="header-anchor">#</a> Literature Review</h2> <p>In this section of report, it provides previous research with new ideas and changes to current research, core algorithm used in project, how algorithm be applied into project and algorithm improvements.</p> <h3 id="previous-work-review"><a href="#previous-work-review" class="header-anchor">#</a> Previous Work Review</h3> <p>In previous work, UNA toolbox from MIT City Form Lab is used to solve the shortest route problem and it can get the shortest path easily just by input start and end data. However, a new idea came to my mind is to create a navigation toolbox by myself which can calculate the shortest path among the whole Vancouver city network based on Dijkstra’s algorithm.</p> <h3 id="general-steps-of-dijkstra-s-algorithm"><a href="#general-steps-of-dijkstra-s-algorithm" class="header-anchor">#</a> General steps of Dijkstra’s Algorithm</h3> <p>Dijkstra’s algorithm is an advanced version of greedy algorithm for finding the shortest path between nodes in a graph. Dijkstra, E. W. (1959) first found there was an approach to construct the tree of minimum total length between the n nodes and find the path of minimum total length between two given nodes to get a shortest path. The general steps of this approach can be concluded in six step: 1. Mark all unvisited nodes and create a set containing all unvisited nodes. 2. Set initial node value 0 as current node and assign every node a tentative distance value. 3. Calculate the distance between current node and all its neighbour nodes to get the shortest tentative distance and mark it. 4. Once checking all neighbour nodes of current node, mark current node which we have visited and remove it from the set we generated in step one. 5. When the shortest tentative distance is infinity or it has come to the final unvisited node, Dijkstra’s algorithm has finished. 6. If it does not come to the end, select the unvisited node with shortest distance as current node and go back to step three.</p> <h3 id="similarities-and-differences-with-approaches"><a href="#similarities-and-differences-with-approaches" class="header-anchor">#</a> Similarities and Differences with Approaches</h3> <p>For similarities, Dijkstra’s algorithm provides a mathematical solution for finding a shortest path among a weighted graph and the project purpose is also to yield a shortest route among the city network. However, Dijkstra’s algorithm can not be used directly among city network and there is a model need to be created for application.</p> <h3 id="apply-dijkstra-s-algorithm-into-city-network"><a href="#apply-dijkstra-s-algorithm-into-city-network" class="header-anchor">#</a> Apply Dijkstra’s Algorithm into City Network</h3> <p>Building city network for Dijkstra’s algorithm to use is to create a weighted graph based on street intersections where street intersections represent for nodes in graph and different street lengths between two nodes represent for corresponding distances between two intersections. Due to the large data set consisted of whole intersections and streets in Vancouver should be processed, there is impossible to store all data and use Dijkstra’s algorithm to calculate a shortest path among the whole city. What has been done is to find a particular area covering start and end points and then perform calculation in this specific area which can save plenty of time and storage space.</p> <h3 id="improvement-of-dijkstra-s-algorithm"><a href="#improvement-of-dijkstra-s-algorithm" class="header-anchor">#</a> Improvement of Dijkstra’s Algorithm</h3> <p>In DongKai Fan and Ping Shi (2010) research, they improved storage structure and searching area algorithm which are two drawbacks of classical Dijkstra’s algorithm. Their algorithm appended analysis of space complexity and analysis of time complexity for storage structure and set restricted search area when finding next node during route calculation. It is possible to create an advanced version of Dijkstra’s Algorithm in this project to select searching area in finding network regions among the city and store processed topological relationships by deleting some unnecessary intersections.</p> <h2 id="study-area-description"><a href="#study-area-description" class="header-anchor">#</a> Study Area Description</h2> <p>Study area in this project is the city of Vancouver. It contains 17013 public streets, 6092 street intersections, 100851 property addresses, 264 parks, 194 schools and 21 libraries and all of these data mentioned are analyzed in the project. For other data such as non city streets, lines, city projects sites, traffic signals and so on are added to consist of the final map but these data are not processed.</p> <p><img src="/assets/img/1.803d4b6b.png" alt="Alt Text"></p> <h2 id="description-of-datasets-data-preprocessing"><a href="#description-of-datasets-data-preprocessing" class="header-anchor">#</a> Description of Datasets &amp; Data Preprocessing</h2> <p>This section will outline the table listing of input data sets and attributes of data set used in analysis, data collecting, development of geodatabase, data checking and preprocessing.</p> <h3 id="listing-table-of-input-data"><a href="#listing-table-of-input-data" class="header-anchor">#</a> Listing Table of Input Data</h3> <p><img src="/assets/img/2.7a998544.png" alt="Alt Text"></p> <h3 id="listing-table-of-data-for-spatial-analysis"><a href="#listing-table-of-data-for-spatial-analysis" class="header-anchor">#</a> Listing Table of Data for Spatial Analysis</h3> <p><img src="/assets/img/3.97e6ac9e.png" alt="Alt Text"></p> <h3 id="listing-table-of-attributes-for-spatial-analysis"><a href="#listing-table-of-attributes-for-spatial-analysis" class="header-anchor">#</a> Listing Table of Attributes for Spatial Analysis</h3> <p><img src="/assets/img/4.f70e71aa.png" alt="Alt Text"></p> <h3 id="data-collecting-and-geodatabase-development"><a href="#data-collecting-and-geodatabase-development" class="header-anchor">#</a> Data Collecting and Geodatabase Development</h3> <p>All data mentioned are downloaded directly from the website established by the government of Vancouver. Once these data are ready to use, a new layer is created in ArcMap to project these data. Then a file geodatabase is created to store selected shape files.</p> <h3 id="data-checking-and-preprocessing"><a href="#data-checking-and-preprocessing" class="header-anchor">#</a> Data Checking and Preprocessing</h3> <p>After finishing building map, checking attribute data of these shape files makes sure data ready to use are reliable. For error and blank in data attribute, the best way is to find information online then fill and correct them. After checking data attribute, it shows data are almost good expect for one problem that the designer got some errors when digitizing public_street shape file. Some of streets are separated in this shape file which means some streets may contain more than two points(two points refer to start point and end point consisted of a whole street). As for data preprocessing, it is necessary to join these separated streets with the same street name into a whole street then store these street information into one list for next operations. What has been solved is to store all streets with street name and XY coordinates into a list first, then process these streets with same street names, join XY coordinates of these streets having the same street name together to update a new street connecting separated information and then delete repeating elements.</p> <h2 id="methodology"><a href="#methodology" class="header-anchor">#</a> Methodology</h2> <p>This section covers a flowchart of solution, an introduction to created functions, a detailed description including seven steps of spatial analysis methods and explanations of core python scripts.</p> <h3 id="flowchart-of-solution"><a href="#flowchart-of-solution" class="header-anchor">#</a> Flowchart of Solution</h3> <p><img src="/assets/img/5.2af89c50.png" alt="Alt Text"> <img src="/assets/img/6.d48917b3.png" alt="Alt Text"></p> <h3 id="list-of-created-functions"><a href="#list-of-created-functions" class="header-anchor">#</a> List of Created Functions</h3> <p><img src="/assets/img/7.67d0dcf4.png" alt="Alt Text"></p> <h3 id="detailed-description-of-methods"><a href="#detailed-description-of-methods" class="header-anchor">#</a> Detailed Description of Methods</h3> <p>Step 1: Store street intersections</p> <p>Street intersections are consisted of the whole city network so the first thing is to store intersections attributes from shape file into an array. A three dimensional list called ‘data’ has been created containing three attributes which are feature ID of intersections and their X Y coordinates separately. From the for loop, the range is 6970 which means there are 6970 intersections in Vancouver and these intersections information have been stored in list ‘data’. For spatial data analysis, it is not wise to process all intersections because it may cost a long time. Next section will illustrate how to select specific region containing few intersections according to users input data to reduce unnecessary process, the selected region of streets and details of operations.</p> <p>Step 2: Collect necessary spatial data from input</p> <p>According to input user address ID, it is efficient to use a search cursor in address shape file and easily get XY coordinate from FID. A part of property_addresses attribute table and function are below:</p> <p><img src="/assets/img/8.5bc2dade.png" alt="Alt Text"></p> <p>Due to the name domain in park is different from other two so we must use ‘if’ to select feature names. After this process, it can get the nearest place to user address. For example, if the user want to go to nearest park, for every park in our map, it contains its own XY coordinate. A part of of park_polygons attribute table is below:</p> <p><img src="/assets/img/9.61d9d758.png" alt="Alt Text"></p> <p>Then a search cursor can be used for every single park to calculate the absolute distance between every park (x1,x2) and user’s home (x2,y2) and then output the nearest one’s XY coordinate and name. For school and library, there are the same as park. So far, we have start point XY coordinate and destination XY coordinate with names.</p> <p>Step 3: Select region which should be analyzed from the map</p> <p>This step is to avoid unnecessary processes because it need not always compute all intersections and streets data in Vancouver which may causes few minutes even Topic in GIS &amp; Geoprocessing Final Project Report 15 few hours. Therefore, a selected region should be assigned. For example, there are start point which is the red triangle and end point which is green rectangle in Figure 3. The original region is light red rectangle and processed region is dark rectangle after adding boundary for original region to make sure all intersections which may affect route calculation are covered. The minimum distance for boundary is 600 meters which has been tested for this number covering routes between all addresses and selected places.</p> <p><img src="/assets/img/10.e49e86f4.png" alt="Alt Text"></p> <p>The next process is to store all intersections in this region into one list and all streets in this region into another list. Because there already exists a list containing all 6970 intersections in data preprocessing, so this process just need to clip some of them from the whole intersections data set into a new list. When it comes to streets storing, it needs some operations to solve maker’s error in public street shape file. The purpose is to connect separated streets into a whole street. Function get_street below can both store streets data and process separated streets connections.</p> <p>Step 4: Create graph</p> <p>For every intersection in the region, distances between every single intersection need to be created and then output the graph which is a three-dimensional list containing one start node, one end node and the distance between them. Function create_graph can yield the graph by input street intersections and streets in the selected region.</p> <p>Step 5: Use Dijsktra algorithm to output the shortest route</p> <p>In this section, scripts are from open source code online and have been some changes to be adapt to the whole project. In create_gragh function, the return data fromat has changed to [node1, node2, distance] to match input format in dijsktra algorithm function. The result of this function is a shortest route containing all passing nodes which is a list consisted of different pairs of intersection to intersection.</p> <p>Step 6: Print navigation output</p> <p>After getting the shortest path, it can print navigation information for users. Function navigation can show street names, street lengths and intersection positions. Due to the shortest path output does not contain street names only has intersections ID, the first two loops are to find XY coordinate of two intersections according to their ID. Then the next loop is to find the street which contains these two intersections. Then it can print street name and the distance how long users should go. In Canada, straight roads are classified into roads with same name without different numbers in front of them. So parameters ‘turn’ and ‘origin’ in this function are used to mark if the main street name has changed which means there is no longer straight road in there and then it can remind users may make a turn at the intersection.</p> <p>Step 7: Create toolbox</p> <p>Based on this script, there are some changes have been added and the project finally yields four different tools for users: 1. property addresses navigation which can provide navigation information from one property address to another address; 2. shortest route navigation which is from one property address to nearest park, school or library; 3. specified destination navigation gives users a path from property address to specific park, school or library; 4. two given places navigation offers a shortest route from one place to another place among parks, libraries and schools.</p> <h2 id="results-and-discussion"><a href="#results-and-discussion" class="header-anchor">#</a> Results and Discussion</h2> <p>This section will illustrate two parts: the map created by ArcMap and results of navigation information for four different tools.</p> <p><img src="/assets/img/11.d9534c3b.png" alt="Alt Text">
The created map contains some of shape files such as public streets, park polygons, schools, libraries and so on in order to illustrate the view of whole city. It also includes some other data like rapid transit line with its stations because it plays an important role in city traffic though they have not been analyzed. For street intersections and property addresses, they are not included in the map because the large number of them may cause the whole map unclear to see and it is unnecessary for users to see these data but they are mainly processed by python scripts to create the navigation toolbox.</p> <p><img src="/assets/img/13.b72559b1.png" alt="Alt Text"> <img src="/assets/img/14.46e513bf.png" alt="Alt Text"> <img src="/assets/img/15.bbf5f120.png" alt="Alt Text"> <img src="/assets/img/16.5409aa53.png" alt="Alt Text"> <img src="/assets/img/17.8d81f762.png" alt="Alt Text"> <img src="/assets/img/18.3821491a.png" alt="Alt Text"> <img src="/assets/img/19.805d8595.png" alt="Alt Text"> <img src="/assets/img/20.b591089b.png" alt="Alt Text"> <img src="/assets/img/21.92fc2ed8.png" alt="Alt Text"></p> <h2 id="assumptions-and-limitations"><a href="#assumptions-and-limitations" class="header-anchor">#</a> Assumptions and Limitations</h2> <p>This toolbox is created to handle all navigation among Vancouver so it may take a long time for large areas route calculation. Due to the core mind is to make a graph among street intersections, once the covered area is bigger, it needs more time to deal with the created graph. A new method is to upgrade the shortest route calculation called arc-flag approach which is based on Dijkstra’s algorithm to accelerate the route calculation. It contains a preprocessing of data in graph to divide into different regions and gather whether an arc is on a shortest path into a given region(Möhring, 2007). So the combination of appropriate partitioning and two direction search can make route calculation more efficient. In addition, the toolbox only can provide shortest path for drivers because it is based on public streets. For users who walk, skate or cycle, the process area should include non public streets and lanes and more than one graph should be generated with various decisions between different types of roads.</p> <h2 id="conclusion-and-future-work"><a href="#conclusion-and-future-work" class="header-anchor">#</a> Conclusion and Future Work</h2> <p>The project provides route navigation from property addresses to nearest or specific schools, libraries and parks and also between two arbitrary given places among city of Vancouver. From attributes in different shape files, spatial data like XY coordinates of objects has been found to analyse and yield the toolbox. Also, the relationship between attributes in every shape file should be generated from object ID to its other attributes for getting access to all the information. From this project, I have gained knowledge in searching GIS data online, creating maps by ArcGIS, spatial data analysis, skills of Python Scripts programming especially in debugging public streets data sets where I found a digitizing error and it makes me understand GIS spatial data more clearly. In the future, I hope I could improve this navigation toolbox by adding lanes and non public street shape files to generate an advanced version of navigation toolbox both for drivers and pedestrians.</p> <h2 id="code"><a href="#code" class="header-anchor">#</a> Code</h2> <p><em>Python solution demo: shortest route calculation</em></p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> arcpy
<span class="token keyword">import</span> math
<span class="token keyword">import</span> re
<span class="token keyword">from</span> arcpy <span class="token keyword">import</span> env
<span class="token keyword">from</span> collections <span class="token keyword">import</span> defaultdict
env<span class="token punctuation">.</span>overwriteOutput <span class="token operator">=</span> <span class="token boolean">True</span>
env<span class="token punctuation">.</span>workspace <span class="token operator">=</span> <span class="token string">&quot;C:/Users/CHAO/Desktop/GIS Project_Chao Zhang/city of vancouver.gdb&quot;</span>
<span class="token comment">#units = arcpy.Describe(&quot;park_polygons&quot;).spatialReference.linearUnitName</span>
units <span class="token operator">=</span> <span class="token string">&quot;meters&quot;</span>
input_id <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>GetParameter<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
input_type <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>GetParameter<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment"># calculation of the distance</span>
<span class="token keyword">def</span> <span class="token function">dis</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">)</span><span class="token punctuation">:</span>
  result <span class="token operator">=</span> math<span class="token punctuation">.</span>sqrt<span class="token punctuation">(</span>a<span class="token operator">*</span>a <span class="token operator">+</span> b<span class="token operator">*</span>b<span class="token punctuation">)</span>
  <span class="token keyword">return</span> result

<span class="token keyword">def</span> <span class="token function">getposition_citizen</span><span class="token punctuation">(</span>id_num<span class="token punctuation">)</span><span class="token punctuation">:</span>
 fc <span class="token operator">=</span> <span class="token string">&quot;property_addresses&quot;</span>
 cursor <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>da<span class="token punctuation">.</span>SearchCursor<span class="token punctuation">(</span>fc<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;SHAPE@XY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;OID@&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
  <span class="token keyword">if</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> id_num<span class="token punctuation">:</span>
   x<span class="token punctuation">,</span>y <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
 <span class="token keyword">del</span> row
 <span class="token keyword">del</span> cursor
 <span class="token keyword">return</span> x<span class="token punctuation">,</span>y

<span class="token keyword">def</span> <span class="token function">destination_info</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 <span class="token keyword">if</span> <span class="token builtin">type</span> <span class="token operator">==</span> <span class="token string">&quot;park&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;park_polygons&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;PARK_NAME&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">if</span> <span class="token builtin">type</span> <span class="token operator">==</span> <span class="token string">&quot;library&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;libraries&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>
 <span class="token keyword">if</span> <span class="token builtin">type</span> <span class="token operator">==</span> <span class="token string">&quot;school&quot;</span><span class="token punctuation">:</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token string">&quot;schools&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;NAME&quot;</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">location_distance_calc</span><span class="token punctuation">(</span>c_x<span class="token punctuation">,</span>c_y<span class="token punctuation">,</span>fc<span class="token punctuation">,</span>a_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
 cursor <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>da<span class="token punctuation">.</span>SearchCursor<span class="token punctuation">(</span>fc<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;SHAPE@XY&quot;</span><span class="token punctuation">,</span>a_name<span class="token punctuation">]</span><span class="token punctuation">)</span>
 s <span class="token operator">=</span> <span class="token number">99</span><span class="token operator">**</span><span class="token number">9</span>
 <span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
  x<span class="token punctuation">,</span>y <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  distance <span class="token operator">=</span> dis<span class="token punctuation">(</span>x<span class="token operator">-</span>c_x<span class="token punctuation">,</span>y<span class="token operator">-</span>c_y<span class="token punctuation">)</span>
  <span class="token keyword">if</span> distance<span class="token operator">&lt;</span>s<span class="token punctuation">:</span>
   s <span class="token operator">=</span> distance
   name <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
   l_x <span class="token operator">=</span> x
   l_y <span class="token operator">=</span> y
 <span class="token keyword">del</span> row
 <span class="token keyword">del</span> cursor
 <span class="token keyword">return</span> name<span class="token punctuation">,</span>l_x<span class="token punctuation">,</span>l_y

<span class="token keyword">def</span> <span class="token function">store_street_intersections</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
 data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">6970</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
   data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

 fc <span class="token operator">=</span> <span class="token string">&quot;street_intersections&quot;</span>
 cursor <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>da<span class="token punctuation">.</span>SearchCursor<span class="token punctuation">(</span>fc<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;OID@&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;SHAPE@XY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;XSTREET&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
  num <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  x<span class="token punctuation">,</span>y <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  data<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> num
  data<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> x
  data<span class="token punctuation">[</span>num<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> y
 <span class="token keyword">del</span> row
 <span class="token keyword">del</span> cursor
 <span class="token keyword">return</span> data

<span class="token keyword">def</span> <span class="token function">get_max_and_min</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>park_x<span class="token punctuation">,</span>park_y<span class="token punctuation">)</span><span class="token punctuation">:</span>
 <span class="token keyword">if</span> x<span class="token operator">&gt;</span>park_x<span class="token punctuation">:</span>
  max_x <span class="token operator">=</span> x
  min_x <span class="token operator">=</span> park_x
 <span class="token keyword">else</span><span class="token punctuation">:</span>
  max_x <span class="token operator">=</span> park_x
  min_x <span class="token operator">=</span> x
 <span class="token keyword">if</span> y<span class="token operator">&gt;</span>park_y<span class="token punctuation">:</span>
  max_y <span class="token operator">=</span> y
  min_y <span class="token operator">=</span> park_y
 <span class="token keyword">else</span><span class="token punctuation">:</span>
  max_y <span class="token operator">=</span> park_y
  min_y <span class="token operator">=</span> y
 <span class="token keyword">return</span> min_x<span class="token punctuation">,</span>max_x<span class="token punctuation">,</span>min_y<span class="token punctuation">,</span>max_y

<span class="token keyword">def</span> <span class="token function">get_region</span><span class="token punctuation">(</span>start_x<span class="token punctuation">,</span>end_x<span class="token punctuation">,</span>start_y<span class="token punctuation">,</span>end_y<span class="token punctuation">,</span>storedata<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment">#select conjunctions</span>
 data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 t <span class="token operator">=</span> <span class="token number">0</span>
 <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">6970</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  x <span class="token operator">=</span> storedata<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  y <span class="token operator">=</span> storedata<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> x<span class="token operator">&gt;</span>start_x <span class="token keyword">and</span> x<span class="token operator">&lt;</span>end_x <span class="token keyword">and</span> y<span class="token operator">&gt;</span>start_y <span class="token keyword">and</span> y<span class="token operator">&lt;</span>end_y<span class="token punctuation">:</span>
   data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> i
   data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> x
   data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> y
   t<span class="token operator">+=</span><span class="token number">1</span>
 <span class="token keyword">return</span> data<span class="token punctuation">,</span>t


<span class="token keyword">def</span> <span class="token function">get_street</span><span class="token punctuation">(</span>start_x<span class="token punctuation">,</span>end_x<span class="token punctuation">,</span>start_y<span class="token punctuation">,</span>end_y<span class="token punctuation">,</span>storedata<span class="token punctuation">)</span><span class="token punctuation">:</span>
 data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 t <span class="token operator">=</span> <span class="token number">0</span>
 fc <span class="token operator">=</span> <span class="token string">&quot;public_streets&quot;</span>
 cursor <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>da<span class="token punctuation">.</span>SearchCursor<span class="token punctuation">(</span>fc<span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">&quot;SHAPE@&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;SHAPE@XY&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;HBLOCK&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token keyword">for</span> row <span class="token keyword">in</span> cursor<span class="token punctuation">:</span>
  x<span class="token punctuation">,</span>y <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> x<span class="token operator">&gt;</span>start_x <span class="token keyword">and</span> x<span class="token operator">&lt;</span>end_x <span class="token keyword">and</span> y<span class="token operator">&gt;</span>start_y <span class="token keyword">and</span> y<span class="token operator">&lt;</span>end_y<span class="token punctuation">:</span>
   s <span class="token operator">=</span> <span class="token number">0</span>
   data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
   data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> row<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
   s<span class="token operator">+=</span><span class="token number">1</span>
   <span class="token keyword">for</span> point <span class="token keyword">in</span> row<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>getPart<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span>s<span class="token punctuation">]</span> <span class="token operator">=</span> point<span class="token punctuation">.</span>X<span class="token punctuation">,</span>point<span class="token punctuation">.</span>Y
    s<span class="token operator">+=</span><span class="token number">1</span>
   t<span class="token operator">+=</span><span class="token number">1</span>
 <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">if</span> data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    add <span class="token operator">=</span> data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token builtin">len</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>add<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
     data<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>add<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">)</span>
    data<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;del&quot;</span>
 newdata <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 <span class="token keyword">for</span> <span class="token builtin">list</span> <span class="token keyword">in</span> data<span class="token punctuation">:</span>
  <span class="token keyword">if</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">!=</span> <span class="token string">&quot;del&quot;</span><span class="token punctuation">:</span>
   newdata<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
 <span class="token keyword">return</span> newdata<span class="token punctuation">,</span><span class="token builtin">len</span><span class="token punctuation">(</span>newdata<span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">create_gragh</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span>region_num<span class="token punctuation">,</span>street<span class="token punctuation">)</span><span class="token punctuation">:</span>
 data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 t <span class="token operator">=</span> <span class="token number">0</span>
 <span class="token keyword">for</span> i <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span>region_num<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">for</span> j <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">,</span>region_num<span class="token punctuation">)</span><span class="token punctuation">:</span>
   <span class="token keyword">for</span> <span class="token builtin">list</span> <span class="token keyword">in</span> street<span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>region<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>region<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">list</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>region<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>region<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">:</span>
     data<span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     <span class="token keyword">for</span> k <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> region<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
     data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> region<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
     data<span class="token punctuation">[</span>t<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> dis <span class="token punctuation">(</span>region<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token operator">-</span>region<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>region<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token operator">-</span>region<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
     t<span class="token operator">+=</span><span class="token number">1</span>
 <span class="token keyword">return</span> data

<span class="token comment">#dijsktra</span>
<span class="token keyword">class</span> <span class="token class-name">Graph</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;
        self.edges is a dict of all possible next nodes
        self.weights has all the weights between two nodes,
        with the two nodes as a tuple as the key
        e.g. {('X', 'A'): 7, ('X', 'B'): 2, ...}
        &quot;&quot;&quot;</span>
        self<span class="token punctuation">.</span>edges <span class="token operator">=</span> defaultdict<span class="token punctuation">(</span><span class="token builtin">list</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>weights <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">def</span> <span class="token function">add_edge</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> from_node<span class="token punctuation">,</span> to_node<span class="token punctuation">,</span> weight<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Note: assumes edges are bi-directional</span>
        self<span class="token punctuation">.</span>edges<span class="token punctuation">[</span>from_node<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>to_node<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>edges<span class="token punctuation">[</span>to_node<span class="token punctuation">]</span><span class="token punctuation">.</span>append<span class="token punctuation">(</span>from_node<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span><span class="token punctuation">(</span>from_node<span class="token punctuation">,</span> to_node<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> weight
        self<span class="token punctuation">.</span>weights<span class="token punctuation">[</span><span class="token punctuation">(</span>to_node<span class="token punctuation">,</span> from_node<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> weight

<span class="token keyword">def</span> <span class="token function">dijsktra</span><span class="token punctuation">(</span>graph<span class="token punctuation">,</span> initial<span class="token punctuation">,</span> end<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># shortest paths is a dict of nodes</span>
    <span class="token comment"># whose value is a tuple of (previous node, weight)</span>
    shortest_paths <span class="token operator">=</span> <span class="token punctuation">{</span>initial<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token boolean">None</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
    current_node <span class="token operator">=</span> initial
    visited <span class="token operator">=</span> <span class="token builtin">set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">while</span> current_node <span class="token operator">!=</span> end<span class="token punctuation">:</span>
        visited<span class="token punctuation">.</span>add<span class="token punctuation">(</span>current_node<span class="token punctuation">)</span>
        destinations <span class="token operator">=</span> graph<span class="token punctuation">.</span>edges<span class="token punctuation">[</span>current_node<span class="token punctuation">]</span>
        weight_to_current_node <span class="token operator">=</span> shortest_paths<span class="token punctuation">[</span>current_node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

        <span class="token keyword">for</span> next_node <span class="token keyword">in</span> destinations<span class="token punctuation">:</span>
            weight <span class="token operator">=</span> graph<span class="token punctuation">.</span>weights<span class="token punctuation">[</span><span class="token punctuation">(</span>current_node<span class="token punctuation">,</span> next_node<span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">+</span> weight_to_current_node
            <span class="token keyword">if</span> next_node <span class="token keyword">not</span> <span class="token keyword">in</span> shortest_paths<span class="token punctuation">:</span>
                shortest_paths<span class="token punctuation">[</span>next_node<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>current_node<span class="token punctuation">,</span> weight<span class="token punctuation">)</span>
            <span class="token keyword">else</span><span class="token punctuation">:</span>
                current_shortest_weight <span class="token operator">=</span> shortest_paths<span class="token punctuation">[</span>next_node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
                <span class="token keyword">if</span> current_shortest_weight <span class="token operator">&gt;</span> weight<span class="token punctuation">:</span>
                    shortest_paths<span class="token punctuation">[</span>next_node<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span>current_node<span class="token punctuation">,</span> weight<span class="token punctuation">)</span>
        next_destinations <span class="token operator">=</span> <span class="token punctuation">{</span>node<span class="token punctuation">:</span> shortest_paths<span class="token punctuation">[</span>node<span class="token punctuation">]</span> <span class="token keyword">for</span> node <span class="token keyword">in</span> shortest_paths <span class="token keyword">if</span> node <span class="token keyword">not</span> <span class="token keyword">in</span> visited<span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token keyword">not</span> next_destinations<span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token string">&quot;Route Not Possible&quot;</span>
        <span class="token comment"># next node is the destination with the lowest weight</span>
        current_node <span class="token operator">=</span> <span class="token builtin">min</span><span class="token punctuation">(</span>next_destinations<span class="token punctuation">,</span> key<span class="token operator">=</span><span class="token keyword">lambda</span> k<span class="token punctuation">:</span> next_destinations<span class="token punctuation">[</span>k<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment"># Work back through destinations in shortest path</span>
    path <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    <span class="token keyword">while</span> current_node <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
        path<span class="token punctuation">.</span>append<span class="token punctuation">(</span>current_node<span class="token punctuation">)</span>
        next_node <span class="token operator">=</span> shortest_paths<span class="token punctuation">[</span>current_node<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
        current_node <span class="token operator">=</span> next_node
    <span class="token comment"># Reverse path</span>
    path <span class="token operator">=</span> path<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> path

<span class="token keyword">def</span> <span class="token function">shortest</span><span class="token punctuation">(</span>region<span class="token punctuation">,</span>x<span class="token punctuation">,</span>y<span class="token punctuation">,</span>l_x<span class="token punctuation">,</span>l_y<span class="token punctuation">)</span><span class="token punctuation">:</span>
 start <span class="token operator">=</span> <span class="token number">99</span><span class="token operator">**</span><span class="token number">9</span>
 end <span class="token operator">=</span> <span class="token number">99</span><span class="token operator">**</span><span class="token number">9</span>
 <span class="token keyword">for</span> <span class="token builtin">list</span> <span class="token keyword">in</span> region<span class="token punctuation">:</span>
  num <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  xxx <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
  yyy <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token keyword">if</span> dis<span class="token punctuation">(</span>x<span class="token operator">-</span>xxx<span class="token punctuation">,</span>y<span class="token operator">-</span>yyy<span class="token punctuation">)</span><span class="token operator">&lt;</span>start<span class="token punctuation">:</span>
   start <span class="token operator">=</span> dis<span class="token punctuation">(</span>x<span class="token operator">-</span>xxx<span class="token punctuation">,</span>y<span class="token operator">-</span>yyy<span class="token punctuation">)</span>
   start_num <span class="token operator">=</span> num
  <span class="token keyword">if</span> dis<span class="token punctuation">(</span>xxx<span class="token operator">-</span>l_x<span class="token punctuation">,</span>yyy<span class="token operator">-</span>l_y<span class="token punctuation">)</span><span class="token operator">&lt;</span>end<span class="token punctuation">:</span>
   end <span class="token operator">=</span> dis<span class="token punctuation">(</span>xxx<span class="token operator">-</span>l_x<span class="token punctuation">,</span>yyy<span class="token operator">-</span>l_y<span class="token punctuation">)</span>
   end_num <span class="token operator">=</span> num
 <span class="token keyword">return</span> start_num<span class="token punctuation">,</span>end_num

<span class="token keyword">def</span> <span class="token function">navigation</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span>region<span class="token punctuation">,</span>street<span class="token punctuation">,</span><span class="token builtin">type</span><span class="token punctuation">,</span>l_name<span class="token punctuation">)</span><span class="token punctuation">:</span>
 arcpy<span class="token punctuation">.</span>AddMessage <span class="token punctuation">(</span><span class="token string">&quot;The nearest {0} near your address is: {1}&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span><span class="token builtin">type</span><span class="token punctuation">,</span>l_name<span class="token punctuation">)</span><span class="token punctuation">)</span>
 arcpy<span class="token punctuation">.</span>AddMessage <span class="token punctuation">(</span><span class="token string">&quot;Route calculation:&quot;</span><span class="token punctuation">)</span>
 origin <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 draw <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
 <span class="token keyword">for</span> count <span class="token keyword">in</span> <span class="token builtin">xrange</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  num1 <span class="token operator">=</span> path<span class="token punctuation">[</span>count<span class="token punctuation">]</span>
  num2 <span class="token operator">=</span> path<span class="token punctuation">[</span>count<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token builtin">list</span> <span class="token keyword">in</span> region<span class="token punctuation">:</span>
   <span class="token keyword">if</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> num1<span class="token punctuation">:</span>
    x1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    y1 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
   <span class="token keyword">if</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">==</span> num2<span class="token punctuation">:</span>
    x2 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    y2 <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token builtin">list</span> <span class="token keyword">in</span> street<span class="token punctuation">:</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">list</span> <span class="token keyword">and</span> <span class="token punctuation">(</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token builtin">list</span><span class="token punctuation">:</span>
    mark <span class="token operator">=</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
    distance <span class="token operator">=</span> <span class="token builtin">int</span><span class="token punctuation">(</span><span class="token builtin">round</span><span class="token punctuation">(</span>dis <span class="token punctuation">(</span>x1<span class="token operator">-</span>x2<span class="token punctuation">,</span>y1<span class="token operator">-</span>y2<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    pointA <span class="token operator">=</span> <span class="token punctuation">(</span>x1<span class="token punctuation">,</span>y1<span class="token punctuation">)</span>
    draw<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pointA<span class="token punctuation">)</span>
    pointB <span class="token operator">=</span> <span class="token punctuation">(</span>x2<span class="token punctuation">,</span>y2<span class="token punctuation">)</span>
    draw<span class="token punctuation">.</span>append<span class="token punctuation">(</span>pointB<span class="token punctuation">)</span>
  turn <span class="token operator">=</span> re<span class="token punctuation">.</span>split<span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span>mark<span class="token punctuation">)</span>
  turn<span class="token punctuation">.</span>pop<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
   origin <span class="token operator">=</span> turn
  <span class="token keyword">if</span> turn <span class="token operator">!=</span> origin<span class="token punctuation">:</span>
   arcpy<span class="token punctuation">.</span>AddMessage <span class="token punctuation">(</span><span class="token string">&quot;Make a trun at the intersection&quot;</span><span class="token punctuation">)</span>
   origin <span class="token operator">=</span> turn
  arcpy<span class="token punctuation">.</span>AddMessage <span class="token punctuation">(</span><span class="token string">&quot;Go striaght along {0}: {1} {2}s&quot;</span><span class="token punctuation">.</span><span class="token builtin">format</span><span class="token punctuation">(</span>mark<span class="token punctuation">,</span>distance<span class="token punctuation">,</span>units<span class="token punctuation">)</span><span class="token punctuation">)</span>
 arcpy<span class="token punctuation">.</span>AddMessage <span class="token punctuation">(</span><span class="token string">&quot;You have reached your destination, have a nice day!&quot;</span><span class="token punctuation">)</span>
 <span class="token comment">#draw the output</span>
 newfc <span class="token operator">=</span> <span class="token string">&quot;navigation_output&quot;</span>
 cursor <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>da<span class="token punctuation">.</span>InsertCursor<span class="token punctuation">(</span>newfc<span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&quot;SHAPE@&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 array <span class="token operator">=</span> arcpy<span class="token punctuation">.</span>Array<span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token keyword">for</span> data <span class="token keyword">in</span> draw<span class="token punctuation">:</span>
  x<span class="token punctuation">,</span>y <span class="token operator">=</span> data
  array<span class="token punctuation">.</span>add<span class="token punctuation">(</span>arcpy<span class="token punctuation">.</span>Point<span class="token punctuation">(</span>x<span class="token punctuation">,</span>y<span class="token punctuation">)</span><span class="token punctuation">)</span>
 cursor<span class="token punctuation">.</span>insertRow<span class="token punctuation">(</span><span class="token punctuation">[</span>arcpy<span class="token punctuation">.</span>Polyline<span class="token punctuation">(</span>array<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
 <span class="token keyword">del</span> cursor

<span class="token comment"># main</span>
citizenID <span class="token operator">=</span>  input_id
destination_type <span class="token operator">=</span> input_type
filename<span class="token punctuation">,</span>attribute_name <span class="token operator">=</span> destination_info<span class="token punctuation">(</span>destination_type<span class="token punctuation">)</span>
p_x<span class="token punctuation">,</span>p_y <span class="token operator">=</span> getposition_citizen<span class="token punctuation">(</span>citizenID<span class="token punctuation">)</span>
location_name<span class="token punctuation">,</span>l_x<span class="token punctuation">,</span>l_y <span class="token operator">=</span> location_distance_calc<span class="token punctuation">(</span>p_x<span class="token punctuation">,</span>p_y<span class="token punctuation">,</span>filename<span class="token punctuation">,</span>attribute_name<span class="token punctuation">)</span>
min_x<span class="token punctuation">,</span>max_x<span class="token punctuation">,</span>min_y<span class="token punctuation">,</span>max_y <span class="token operator">=</span> get_max_and_min<span class="token punctuation">(</span>p_x<span class="token punctuation">,</span>p_y<span class="token punctuation">,</span>l_x<span class="token punctuation">,</span>l_y<span class="token punctuation">)</span>
storedata <span class="token operator">=</span> store_street_intersections<span class="token punctuation">(</span><span class="token punctuation">)</span>
region<span class="token punctuation">,</span>region_num <span class="token operator">=</span> get_region<span class="token punctuation">(</span>min_x<span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span>max_x<span class="token operator">+</span><span class="token number">600</span><span class="token punctuation">,</span>min_y<span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span>max_y<span class="token operator">+</span><span class="token number">600</span><span class="token punctuation">,</span>storedata<span class="token punctuation">)</span>
street<span class="token punctuation">,</span>street_num <span class="token operator">=</span> get_street<span class="token punctuation">(</span>min_x<span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span>max_x<span class="token operator">+</span><span class="token number">600</span><span class="token punctuation">,</span>min_y<span class="token operator">-</span><span class="token number">600</span><span class="token punctuation">,</span>max_y<span class="token operator">+</span><span class="token number">600</span><span class="token punctuation">,</span>storedata<span class="token punctuation">)</span>
edges <span class="token operator">=</span> create_gragh<span class="token punctuation">(</span>region<span class="token punctuation">,</span>region_num<span class="token punctuation">,</span>street<span class="token punctuation">)</span>
graph <span class="token operator">=</span> Graph<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> edge <span class="token keyword">in</span> edges<span class="token punctuation">:</span>
    graph<span class="token punctuation">.</span>add_edge<span class="token punctuation">(</span><span class="token operator">*</span>edge<span class="token punctuation">)</span>

start<span class="token punctuation">,</span>end <span class="token operator">=</span> shortest<span class="token punctuation">(</span>region<span class="token punctuation">,</span>p_x<span class="token punctuation">,</span>p_y<span class="token punctuation">,</span>l_x<span class="token punctuation">,</span>l_y<span class="token punctuation">)</span>
path <span class="token operator">=</span> dijsktra<span class="token punctuation">(</span>graph<span class="token punctuation">,</span>start<span class="token punctuation">,</span>end<span class="token punctuation">)</span>
navigation<span class="token punctuation">(</span>path<span class="token punctuation">,</span>region<span class="token punctuation">,</span>street<span class="token punctuation">,</span>destination_type<span class="token punctuation">,</span>location_name<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br><span class="line-number">244</span><br><span class="line-number">245</span><br><span class="line-number">246</span><br><span class="line-number">247</span><br><span class="line-number">248</span><br><span class="line-number">249</span><br><span class="line-number">250</span><br><span class="line-number">251</span><br><span class="line-number">252</span><br><span class="line-number">253</span><br><span class="line-number">254</span><br><span class="line-number">255</span><br><span class="line-number">256</span><br><span class="line-number">257</span><br><span class="line-number">258</span><br><span class="line-number">259</span><br><span class="line-number">260</span><br><span class="line-number">261</span><br><span class="line-number">262</span><br><span class="line-number">263</span><br><span class="line-number">264</span><br><span class="line-number">265</span><br><span class="line-number">266</span><br><span class="line-number">267</span><br><span class="line-number">268</span><br><span class="line-number">269</span><br><span class="line-number">270</span><br><span class="line-number">271</span><br><span class="line-number">272</span><br><span class="line-number">273</span><br><span class="line-number">274</span><br><span class="line-number">275</span><br><span class="line-number">276</span><br></div></div></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div> <ul class="side-bar sub-sidebar-wrapper" style="width:0;" data-v-70334359></ul></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div></div></div>
    <script src="/assets/js/app.07bab564.js" defer></script><script src="/assets/js/3.981dde78.js" defer></script><script src="/assets/js/1.459f4565.js" defer></script><script src="/assets/js/4.83b15931.js" defer></script>
  </body>
</html>
